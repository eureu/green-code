(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t["ymap3-components"]={},t.React,t.ReactDOM))})(this,function(t,e,y){"use strict";const Y=e.createContext({}),C=typeof document<"u"?e.useLayoutEffect:e.useEffect;function r(n,u){let a;const c=({...o},l)=>{const{reactify:s,ymaps:p}=e.useContext(Y),[f,m]=e.useState(!1);return C(()=>{u?window[u]?(m(!0),a=s.module(window[u])[n]):p.import(u).then(M=>{window[u]=M,s.module(M)&&(m(!0),a=s.module(M)[n])}):(a=s.module(p)[n],m(!0))},[]),!a||!f?null:e.createElement(a,{ref:l,...o})};return e.forwardRef(c)}const h=async(n,u="ru_RU")=>new Promise(async(a,c)=>{if(window.ymaps3){const o=window.ymaps3;await o.ready;const s=(await o.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,y);s.module(o),a({ymaps:o,reactify:s})}else{const o=document.createElement("script");document.body.appendChild(o),o.type="text/javascript",o.src=`https://api-maps.yandex.ru/v3/?apikey=${n}&lang=${u}`,o.onload=async()=>{const l=window.ymaps3;await l.ready;const p=(await l.import("@yandex/ymaps3-reactify")).reactify.bindTo(e,y);a({ymaps:l,reactify:p})},o.onerror=c}}),S=({apiKey:n,lang:u,children:a,onLoad:c})=>{const[o,l]=e.useState();return C(()=>{h(n,u).then(s=>{l(s),c&&c(s)})},[]),o?e.createElement(Y.Provider,{value:o},a):e.createElement(e.Fragment,null)},D=e.memo(S);var i=(n=>(n.CartesianProjection="@yandex/ymaps3-cartesian-projection@0.0.1",n.Clusterer="@yandex/ymaps3-clusterer@0.0.1",n.Controls="@yandex/ymaps3-controls@0.0.1",n.Hint="@yandex/ymaps3-hint@0.0.1",n.Markers="@yandex/ymaps3-markers@0.0.1",n.SphericalMercatorProjection="@yandex/ymaps3-spherical-mercator-projection@0.0.1",n))(i||{});const w=e.createContext({hint:void 0}),L=({children:n,context:u})=>{const a=e.useContext(u);return e.createElement(w.Provider,{value:a},n)},E=({children:n,hint:u})=>{const{reactify:a,ymaps:c}=e.useContext(Y),[o,l]=e.useState(),s=e.useMemo(()=>{if(o){const p=window[i.Hint];return a.module(p).YMapHint}},[o]);return e.useEffect(()=>{if(window[i.Hint]){const p=window[i.Hint];l(a.module(p).YMapHintContext)}else c.import(i.Hint).then(p=>{window[i.Hint]=p,a.module(p)&&l(a.module(p).YMapHintContext)})},[]),!s||!o||!n?e.createElement(e.Fragment,null):e.createElement(s,{hint:u},e.createElement(L,{context:o},n))},H=e.forwardRef(({gridSize:n,method:u,...a},c)=>{const{reactify:o,ymaps:l}=e.useContext(Y),[s,p]=e.useState(),[f,m]=e.useMemo(()=>{if(s){const d=window[i.Clusterer];return[o.module(d).YMapClusterer,u||o.module(d).clusterByGrid]}return[]},[s]);e.useEffect(()=>{window[i.Clusterer]?p(window[i.Clusterer]):l.import(i.Clusterer).then(d=>{window[i.Clusterer]=d,p(d)})},[]);const M=e.useMemo(()=>{if(m&&n)return m({gridSize:n})},[m,n]);return!f||!M?e.createElement(e.Fragment,null):e.createElement(f,{ref:c,method:M,...a})}),F=r("YMapGeolocationControl",i.Controls),v=r("YMapZoomControl",i.Controls),T=r("YMapClusterer",i.Clusterer),j=r("YMapDefaultMarker",i.Markers),x=r("YMap"),b=r("YMapTileDataSource"),B=r("ThemeContext"),G=r("YMapControl"),Z=r("YMapLayer"),$=r("YMapMarker"),q=r("YMapDefaultSchemeLayer"),I=r("YMapDefaultFeaturesLayer"),W=r("YMapDefaultSatelliteLayer"),k=r("YMapListener"),O=r("YMapControls"),U=r("YMapControlButton"),_=r("YMapContainer"),A=r("YMapCollection"),J=r("YMapFeature"),K=r("YMapFeatureDataSource");t.ThemeContext=B,t.YMap=x,t.YMapClusterer=T,t.YMapCollection=A,t.YMapComponentsProvider=D,t.YMapContainer=_,t.YMapControl=G,t.YMapControlButton=U,t.YMapControls=O,t.YMapCustomClusterer=H,t.YMapDefaultFeaturesLayer=I,t.YMapDefaultMarker=j,t.YMapDefaultSatelliteLayer=W,t.YMapDefaultSchemeLayer=q,t.YMapFeature=J,t.YMapFeatureDataSource=K,t.YMapGeolocationControl=F,t.YMapHint=E,t.YMapHintContext=w,t.YMapLayer=Z,t.YMapListener=k,t.YMapMarker=$,t.YMapTileDataSource=b,t.YMapZoomControl=v,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
